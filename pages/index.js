import Head from 'next/head'
import Link from 'next/link'
// import Home1 from '../components/organism/home/sect1'
import Home2 from '../components/organism/home/sect2'
import Home3 from '../components/organism/home/sect3'
import Home4 from '../components/organism/home/sect4'
import NavHome from '../components/organism/navHome'

import {useState} from "react";

export async function getServerSideProps(context){
  // const idUserActive = await fetch( "http://localhost:8000/users/getid" ).then((response) => response.json());


  // const dataHome2 = await fetch( "http://localhost:8000/recipes/show/name" ).then((response) => response.json());
  const dataHome3 = await fetch( "http://localhost:8000/recipes/show/all" ).then((response) => response.json());
  const dataHome4 = await fetch( "http://localhost:8000/recipes/show/new" ).then((response) => response.json());
  
  return {
    props: {
      // dataHome2,
      dataHome3,
      dataHome4,
      // idUserActive,
    }
  }
};

export default function Home(props) {
  // console.log(props);
  const [Searching, setSearching] = useState([]);
  const handleSearchingName = () => {
    window.location.href=`http://localhost:3000/search/${Searching}`
  };

  return (
    <div className="mobile" >
      <Head>
        <title>Home</title>
        <meta charSet="utf-8"/>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
      </Head>

      <main>
        <div className="container">

          {/* SEARCH RECIPES - HOME */}
          {/* <section className="mt-5 "> <Home1 
          // data1={props.dataHome1.data} 
          /> </section>  */}

          {/* SEARCH RECIPES - HOME */}
          <section className="mt-5 ">
            <form>
              <div className="row">
                <div className="col-9">
                  <div 
                    className="input-group"
                    style={{
                      border: "none",
                      "boxShadow": "2px 2px 5px 1px rgba(0,0,0,0.12)",
                      "WebkitBoxShadow": "2px 2px 5px 1px rgba(0,0,0,0.12)",
                      "MozBoxShadow": "2px 2px 5px 1px rgba(0,0,0,0.12)",
                    }}
                  >
                    <i className="input-group-text bi bi-search bg-white" id="logosearch"></i>
                    <input
                      placeholder="Search Pasta, Bread, etc"
                      type="search"
                      className="form-control"
                      id="searchinput"
                      onChange={(e) => setSearching(e.target.value)}
                    />
                  </div>
                </div>
                <div className="col-3">
                  <button id="searchbutton"
                    type='button'
                    onClick={handleSearchingName}
                  >Search</button>
                </div>
              </div>
            </form>
          </section>

          {/* CATEGORY RECIPE - HOME */}
          <section> <Home2 /> </section> 

          {/* NEWEST RECIPES - HOME */}
          <section> <Home3 data3={props.dataHome3.data} /> </section> 

          {/* ALL POPULAR RECIPES - HOME */}
          <section> <Home4 data4={props.dataHome4.data} /> </section> 
          
        </div>
      </main>
      <NavHome sendid={props.idUserActive}/>
    </div>
  )
}